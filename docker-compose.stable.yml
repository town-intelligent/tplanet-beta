# TPlanet Stable Environment Override
# Usage: docker compose -f docker-compose.yml -f deploy/docker-compose.stable.yml up -d

services:
  frontend:
    container_name: tplanet-frontend-stable
    command: npm run preview
    ports:
      - "5170:5170"
    environment:
      - VITE_HOST_URL_TPLANET=https://tplanet.4impact.cc
      - VITE_API_LLMTWINS=https://llmtwins.4impact.cc

  backend:
    container_name: tplanet-backend-stable
    command: gunicorn backend.wsgi:application --bind 0.0.0.0:5567
    ports:
      - "5570:5567"
    environment:
      - DJANGO_SETTINGS_MODULE=backend.settings
      - DEBUG=False

  db:
    container_name: tplanet-db-stable
    ports:
      - "5434:5432"

  llmtwins:
    container_name: tplanet-llmtwins-stable
    ports:
      - "8000:8002"

  llmtwins-wrapper:
    container_name: tplanet-llmtwins-wrapper-stable
    ports:
      - "8001:8001"
    environment:
      # Empty = allow all tenants
      - VALID_TENANTS=
